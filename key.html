<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Key Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        #key {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        button {
            font-size: 16px;
            padding: 10px 20px;
        }
    </style>
</head>
<body>
    <div id="key">Loading...</div>
    <button id="openKey">Open Key</button>
    <script>
        const PASTEBIN_API_KEY = '_sQt3hxDF8J3QPZD_Wh271HFyL4NtZat'; // Your Pastebin API key
        const PASTEBIN_USERNAME = 'x_ubs'; // Your Pastebin username
        const PASTEBIN_PASSWORD = 'killerfox365'; // Your Pastebin password

        function generateKey(seed) {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let result = 'Manny_';
            for (let i = 0; i < 8; i++) {
                result += characters.charAt(seed % characters.length);
                seed = Math.floor(seed / characters.length);
            }
            return result;
        }

        function getDailyKey() {
            const date = new Date();
            const day = date.toISOString().slice(0, 10); // YYYY-MM-DD
            let seed = 0;
            for (let i = 0; i < day.length; i++) {
                seed = (seed * 31 + day.charCodeAt(i)) % 1e9; // Improved seed calculation
            }
            return generateKey(seed);
        }

        document.getElementById('key').textContent = getDailyKey();

        document.getElementById('openKey').addEventListener('click', async () => {
            const key = getDailyKey();
            const pasteData = {
                title: 'Manny Key',
                content: key,
                expiration: 10 // Expire in 10 minutes
            };

            try {
                // Authenticate with Pastebin API
                const authResponse = await fetch('https://pastebin.com/api/api_login.php', {
                    method: 'POST',
                    body: new URLSearchParams({
                        api_dev_key: PASTEBIN_API_KEY,
                        api_user_name: PASTEBIN_USERNAME,
                        api_user_password: PASTEBIN_PASSWORD
                    }),
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    }
                });
                const authData = await authResponse.text();
                const userApiKey = authData.trim();

                if (userApiKey.startsWith('Bad API request')) {
                    throw new Error('Authentication failed.');
                }

                // Create a new paste
                const pasteResponse = await fetch('https://pastebin.com/api/api_post.php', {
                    method: 'POST',
                    body: new URLSearchParams({
                        api_dev_key: PASTEBIN_API_KEY,
                        api_user_api_key: userApiKey,
                        api_paste_code: pasteData.content,
                        api_paste_name: pasteData.title,
                        api_paste_expire_date: new Date(Date.now() + pasteData.expiration * 60 * 1000).toISOString().slice(0, 19),
                        api_option: 'paste'
                    }),
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    }
                });
                const pasteUrl = await pasteResponse.text();

                if (pasteUrl.startsWith('Bad API request')) {
                    throw new Error('Failed to create paste.');
                }

                // Open the Pastebin URL in a new tab
                window.open(pasteUrl, '_blank');
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        });
    </script>
</body>
</html>
